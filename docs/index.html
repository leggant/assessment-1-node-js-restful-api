<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link
      type="text/css"
      rel="stylesheet"
      href="styles/prettify-tomorrow.css"
    />
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css" />
  </head>

  <body>
    <div id="main">
      <h1 class="page-title">Home</h1>

      <h3></h3>

      <section>
        <article>
          <h1>Assessment 1 - @leggant</h1>
          <h2>:rocket:Deployment - Heroku</h2>
          <p>
            :anchor:<strong>Pipeline</strong>: :anchor:<strong>Staging</strong>:
            :anchor:<strong>Production</strong>:
          </p>
          <h2>API Endpoints</h2>
          <h2>Postman Project</h2>
          <h2>Entity Relationship Diagram</h2>
          <p>
            :anchor:
            <strong
              ><a
                href="https://lucid.app/lucidchart/d03c09c4-e9c0-4f14-bf42-dceaf7a4e0d8/edit?viewport_loc=-354%2C156%2C3162%2C1102%2C0_0&amp;invitationId=inv_c9acfca4-7f84-4762-87a2-5b0f96bca0ea"
                >Made with Lucidchart</a
              ></strong
            >
          </p>
          <p>
            <img
              src="./docs/imgs/App_Dev_API_ERD.png?raw=true"
              width="850"
              title="hover text"
            />
          </p>
          <h2>API/Command Line Instructions</h2>
          <h3>Migrate the Database</h3>
          <h4>Development</h4>
          <pre class="prettyprint source lang-node"><code>npm run migrate:dev
</code></pre>
          <h5>Error Handling</h5>
          <p>If this command above outputs the following error:</p>
          <pre class="prettyprint source lang-bash"><code>Error: P3005

The database schema is not empty. Read more about how to baseline an existing production database: https://pris.ly/d/migrate-baseline
</code></pre>
          <p>
            I found the only way to resolve this is to delete the locally stored
            migration file(s). e.g. <code>./prisma/migrations/**</code> Then
            re-run the migration command:
          </p>
          <pre class="prettyprint source lang-node"><code>npm run migrate:dev
</code></pre>
          <h5>Additional Commands</h5>
          <pre
            class="prettyprint source lang-node"
          ><code>npm run reset:dev // reset the database
</code></pre>
          <h4>Production</h4>
          <pre
            class="prettyprint source lang-node"
          ><code>npm run resolve:dev 20221219234050_dev // folder name of the local migration ./prisma/migrations/20221219234050_dev
npm run migrate:prod // this command wil timeout, re-run until successfully completed
</code></pre>
          <h3>Run Docker PostGres DB</h3>
          <ul>
            <li>
              start docker on the local system, run the following command in
              vsCode terminal. This will run a database locally within a
              background process
            </li>
          </ul>
          <pre
            class="prettyprint source lang-bash"
          ><code>docker run --name apipostgresinstance -p 5432:5432 -e POSTGRES_PASSWORD=password -d postgres
</code></pre>
          <ul>
            <li>add the postgres db address to the .env.development file</li>
          </ul>
          <pre
            class="prettyprint source lang-plaintext"
          ><code>DATABASE_URL=&quot;postgres://postgres:password@localhost:5432/apipostgresinstance&quot;
SHADOW_DATABASE_URL=&quot;postgres://postgres:password@localhost:5432/apipostgresinstance&quot;
</code></pre>
          <ul>
            <li>run a test migration with the following command</li>
          </ul>
          <pre class="prettyprint source lang-bash"><code>npx prisma db push
</code></pre>
          <h2>Gist Links</h2>
          <p><strong>Note: more users added than required.</strong></p>
          <ul>
            <li>
              :anchor:
              <a
                href="https://gist.github.com/leggant/0bba24ff5402123c0a1301df853c5541"
                >End-point for Basic Users</a
              >
            </li>
            <li>
              :anchor:
              <a
                href="https://gist.github.com/leggant/55140b7528dae48661395db873568dfe"
                >End-point for Admin Users</a
              >
            </li>
          </ul>
          <h2>:bookmark_tabs:References</h2>
          <ul>
            <li>
              :anchor: https://www.freecodecamp.org/news/the-express-handbook
            </li>
            <li>
              :anchor: https://express-validator.github.io/docs/index.html
            </li>
            <li>
              :anchor: https://youtu.be/YK-GurROGIg
              <a
                href="https://github.com/otago-polytechnic-bit-courses/assessment-1-node-js-restful-api-leggant/issues/12"
                >#12</a
              >
            </li>
            <li>
              :anchor:
              https://blog.devgenius.io/validating-user-inputs-on-your-express-js-application-with-express-validator-4d82b995f524
            </li>
            <li>
              :anchor: https://www.w3schools.com/jsref/jsref_startswith.asp
            </li>
            <li>:anchor: https://www.youtube.com/watch?v=7i7xmwowwCY</li>
            <li>
              :anchor:
              https://stackoverflow.com/questions/1050720/how-to-add-hours-to-a-date-object
            </li>
            <li>
              :anchor:
              <strong>database seeder</strong>
              https://www.prisma.io/docs/guides/database/seed-database#example-seed-scripts
            </li>
            <li>
              :anchor:
              https://stackoverflow.com/questions/69526209/prisma-how-can-i-update-only-some-of-the-models-fields-in-update
            </li>
            <li>
              :anchor:
              https://bobbyhadz.com/blog/javascript-check-if-object-is-empty
            </li>
            <li>
              :anchor: get first key/value from object
              https://stackoverflow.com/a/56969714
            </li>
            <li>
              :anchor: testing axios functions from the commandline using
              <code>run-func</code> npm package
              <ul>
                <li>https://stackoverflow.com/a/43598047</li>
                <li>
                  using the command:
                  <code>npx run-func ./utils/axiosRequests.mjs getUsers</code>
                  and
                </li>
                <li>
                  <code
                    >npx env-cmd -f .env.development npx run-func
                    ./api/v1/controllers/seeder_controller.js seedUsers</code
                  >
                </li>
              </ul>
            </li>
            <li>
              :anchor: get object count -
              https://www.geeksforgeeks.org/find-the-length-of-a-javascript-object
            </li>
            <li>
              :anchor: get specific values from array of objects
              <ul>
                <li>
                  https://www.designcise.com/web/tutorial/how-to-extract-specific-keys-values-from-an-array-of-objects-in-javascript
                </li>
              </ul>
            </li>
            <li>https://stackoverflow.com/a/8016205</li>
            <li>
              https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/now#try_it
            </li>
          </ul>
        </article>
      </section>
    </div>

    <nav>
      <h2><a href="index.html">Home</a></h2>
      <h3>Modules</h3>
      <ul>
        <li><a href="module-PRISMA.html">PRISMA</a></li>
      </ul>
      <h3>Classes</h3>
      <ul>
        <li><a href="dotenv.html">dotenv</a></li>
        <li><a href="express.html">express</a></li>
      </ul>
      <h3>Tutorials</h3>
      <ul>
        <li><a href="tutorial-setup.html">Dev Environment Start Guide</a></li>
      </ul>
      <h3>Global</h3>
      <ul>
        <li><a href="global.html#API_VERSION">API_VERSION</a></li>
        <li><a href="global.html#BASE_PATH">BASE_PATH</a></li>
        <li><a href="global.html#GISTADMIN">GISTADMIN</a></li>
        <li><a href="global.html#GISTAXIOS">GISTAXIOS</a></li>
        <li><a href="global.html#PATHS">PATHS</a></li>
        <li><a href="global.html#SERVER_PORT">SERVER_PORT</a></li>
      </ul>
    </nav>

    <br class="clear" />

    <footer>
      Documentation generated by
      <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.0</a> on Fri Dec 23
      2022 18:05:39 GMT+1300 (New Zealand Daylight Time)
    </footer>

    <script>
      prettyPrint();
    </script>
    <script src="scripts/linenumber.js"></script>
  </body>
</html>
