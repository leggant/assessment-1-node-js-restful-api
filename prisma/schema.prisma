// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider          = "postgresql"
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
}

model User {
  id            String  @id @default(uuid())
  firstName     String
  lastName      String
  userName      String  @unique
  email         String  @unique
  password      String
  profileImgURL String? @unique
  roleType      Role    @default(BASIC_USER)

  @@index([email, userName])
}

model UserScore {
  id     Int    @default(autoincrement())
  userId String
  quizId Int
  score  Int

  @@id([id, userId, quizId])
}

model UserParticipant {
  id     Int    @default(autoincrement())
  userId String
  quizId Int

  @@id([id, userId, quizId])
}

model UserQuestionAnswer {
  id            Int     @default(autoincrement())
  userId        String
  quizId        Int
  questionId    Int
  correctAnswer Boolean @default(false)

  @@id([id, userId, quizId, questionId])
}

model Category {
  id   Int    @id
  name String @unique
}

model Question {
  id               Int    @default(autoincrement())
  quizId           Int
  question         String
  correctAnswer    String
  incorrectAnswers Json

  @@id([id, quizId])
}

model Quiz {
  id           Int        @default(autoincrement())
  categoryId   Int
  name         String     @unique
  answerType   AnswerType @default(multiple)
  difficulty   Difficulty @default(easy)
  startDate    DateTime
  endDate      DateTime?
  questionList Json
  scoreList    Json

  @@id([id, categoryId, name])
}

enum Role {
  BASIC_USER
  ADMIN_USER
}

enum Difficulty {
  easy
  medium
  hard
}

enum AnswerType {
  boolean
  multiple
}
